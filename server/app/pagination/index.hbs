<div class="container">
    <div class="row help panel panel-default">
        <div class="panel-heading">
            <div class="panel-title">
                Challenge 2: Split on Multiple Pages
            </div>
        </div>
        <div class="panel-body">
            <div class="help-title">Goal</div>

            <div class="help-content">
                Each page has a few persons.
                Create an agent and find a way to scrape every pages.
            </div>

            <div class="help-title">Documentation</div>

            <div class="help-code">
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-puppeteerlaunchoptions">Puppeteer.launch()</a></br>
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-browsernewpage">Puppeteer.newPage()</a></br>
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-pagegotourl-options">Puppeteer.Page.goto()</a></br>
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-pagewaitforselectorselector-options">Puppeteer.Page.waitForSelector()</a></br>
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-pageaddscripttagoptions">Puppeteer.Page.addScriptTag()</a></br>
                <a target="_blank" href="https://pptr.dev/#?product=Puppeteer&version=v2.0.0&show=api-pageevaluatepagefunction-args">Puppeteer.Page.evaluate()</a></br>
                <a target="_blank" href="https://hub.phantombuster.com/reference#buster-setresultobject">buster.setResultObject()</a></br>
            </div>

            <div class="help-title">Instructions</div>

            <div class="help-content">
                <ol>
                    <li>
                        Create the agent <code>scraping-challenge-2</code>
                    </li>

                    <li>
                        Access this page using <code>Puppeteer.newPage() and Puppeteer.Page.goto()</code> to open the page.
                    </li>

                    <li>
                        Wait for an element to load before scraping with <code>Puppeteer.Page.waitForSelector()</code>.
                    </li>

                    <li>
                        Use the function <code>Puppeteer.Page.addScriptTag()</code> to inject jQuery in the page.
                    </li>

                    <li>
                        Create a function to scrape the page with jQuery now that it is injected and execute it in the page using <code>Puppeteer.Page.evaluate()</code>.
                    </li>

                    <li>
                        Use the url pagination and a for loop and repeat the scraping.
                    </li>

                    <li>
                        Send the data using <code>buster.setResultObject()</code>.
                    </li>
                </ol>
            </div>
            <div class="help-title">Solution</div>

            <div class="help-content">
                <a href="/scripts/scraping-challenge-2.js">In case you are stuck</a>
            </div>
        </div>
    </div>

    <h2>Persons
        <span class="persons-min">{{min}}</span>
        -
        <span class="persons-max">{{max}}</span>
        /
        <span class="persons-count">{{count}}</span>
    </h2>

    {{#each persons}}
        <div class="person panel panel-default">
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-4">
                        <div class="property-key">Name</div>
                        <div class="name property-value">{{honorific_prefix}} {{given_name}} {{family_name}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Birth year</div>
                        <div class="birth_year property-value">{{birth_year}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Death year</div>
                        <div class="death_year property-value">{{death_year}}</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="property-key">Gender</div>
                        <div class="gender property-value">{{gender}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Marital status</div>
                        <div class="marital_status property-value">{{marital_status}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Spouse</div>
                        <div class="spouse property-value">{{spouse}}</div>
                    </div>
                </div>

                {{#if crew}}
                    <div class="row">
                        <div class="col-md-4">
                            <div class="property-key">Member of crew</div>
                            <div class="crew property-value">Yes</div>
                        </div>

                        <div class="col-md-4">
                            <div class="property-key">Last ship (crew)</div>
                            <div class="crew_last_ship property-value">{{crew_last_ship}}</div>
                        </div>
                    </div>
                {{/if}}

                {{#unless crew}}
                    <div class="row">
                        <div class="col-md-4">
                            <div class="property-key">Ticket class</div>
                            <div class="pclass property-value">{{pclass}}</div>
                        </div>

                        <div class="col-md-4">
                            <div class="property-key">Ticket number</div>
                            <div class="ticket_num property-value">{{ticket_num}}</div>
                        </div>

                        <div class="col-md-4">
                            <div class="property-key">Ticket price</div>
                            <div class="ticket_fare property-value">{{ticket_fare}}</div>
                        </div>
                    </div>
                {{/unless}}

                <div class="row">
                    <div class="col-md-4">
                        <div class="property-key">Residence</div>
                        <div class="residence property-value">{{last_residence_city}} {{last_residence_state}} {{last_residence_country}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Job</div>
                        <div class="job property-value">{{job}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Companions count</div>
                        <div class="companions_count property-value">{{companions_count}}</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="property-key">Cabin</div>
                        <div class="cabin property-value">{{cabin}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Embarked in</div>
                        <div class="first_embarked_place property-value">{{first_embarked_place}}</div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Destination</div>
                        <div class="destination property-value">{{destination_city}} {{destination_state}} {{destination_country}}</div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-4">
                        <div class="property-key">Died in the Titanic</div>
                        <div class="died_in_titanic property-value">
                            {{#if died_in_titanic}}Yes{{/if}}
                            {{#unless died_in_titanic}}No{{/unless}}
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Body recovered</div>
                        <div class="body_recovered property-value">
                            {{#if body_recovered}}Yes{{/if}}
                            {{#unless body_recovered}}No{{/unless}}
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="property-key">Rescue boat number</div>
                        <div class="rescue_boat_num property-value">{{rescue_boat_num}}</div>
                    </div>
                </div>
            </div>
        </div>
    {{/each}}
</div>

<div class="container">
    <nav class="pagination-nav">
        <ul class="pager">
            <li>
                {{#if pageMin}}
                    <a href="/pagination?page={{pageMin}}">Previous</a>
                {{/if}}

                {{#unless pageMin}}
                    <a class="disabled">Previous</a>
                {{/unless}}
            </li>

            <li>
                {{#if pagePlus}}
                    <a href="/pagination?page={{pagePlus}}">Next</a>
                {{/if}}

                {{#unless pagePlus}}
                    <a class="disabled">Next</a>
                {{/unless}}
            </li>
        </ul>
    </nav>
</div>
